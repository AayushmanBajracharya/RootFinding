<!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Root Finding Method & Comparison</title>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    
    <style>
      * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
      }

      body {
          font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
          background: linear-gradient(135deg, #ecfdf5 0%, #f0fdfa 50%, #e6fffa 100%);
          min-height: 100vh;
          padding: 24px;
      }
    

      .container {
          max-width: 1200px;
          margin: 0 auto;
      }

      .header {
          text-align: center;
          margin-bottom: 32px;
      }

      .header h1 {
          font-size: 2.5rem;
          font-weight: bold;
          color: #1f2937;
          margin-bottom: 8px;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 12px;
      }

      .header p {
          color: #4b5563;
          font-size: 1.125rem;
      }

      .section {
          background: rgba(255, 255, 255, 0.8);
          backdrop-filter: blur(10px);
          border-radius: 16px;
          padding: 32px;
          border: 1px solid #e5e7eb;
          box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
          margin-bottom: 32px;
          transition: all 0.3s ease;
      }

      .section:hover {
          transform: translateY(-4px);
          box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
      }

      .section h2 {
          font-size: 1.5rem;
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 24px;
          display: flex;
          align-items: center;
          gap: 12px;
      }

      .equation-input {
          max-width: 768px;
          margin: 0 auto;
      }

      .input-container{
          position: relative;
          margin-bottom: 16px;
      }

      .equation-input input {
          width: 100%;
          padding: 16px 24px;
          background: white;
          border: 2px solid #d1d5db;
          border-radius: 12px;
          color: #1f2937;
          font-size: 1.125rem;
          transition: all 0.2s;
      }

      .equation-input input:focus {
          outline: none;
          border-color: #14b8a6;
          box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
      }

      .examples {
          margin-top: 16px;
          color: #4b5563;
      }

      .examples p {
          font-weight: 500;
          margin-bottom: 8px;
      }

      .example-tags {
          display: flex;
          gap: 16px;
          flex-wrap: wrap;
      }

      .example-tag {
          background: #f3f4f6;
          padding: 8px 16px;
          border-radius: 8px;
          font-size: 0.875rem;
          cursor: pointer;
          transition: all 0.2s ease;
          border: 1px solid #d1d5db;
      }

      .example-tag:hover {
          background: linear-gradient(135deg, #3b82f6, #2563eb);
          color: #ffffff;
          transform: translateY(-1px);
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      }

         .method-cards-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 24px;
        margin-top: 24px;
    }

    @media (max-width: 1024px) {
        .method-cards-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    @media (max-width: 768px) {
        .method-cards-grid {
            grid-template-columns: 1fr;
        }
    }

          .methods-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 16px;
    }

    .method-btn {
        padding: 24px;
        border-radius: 12px;
        border: 2px solid #e5e7eb;
        background: linear-gradient(135deg, #f8fafc, #e2e8f0);
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: space-between;
        color: #1f2937;
    }

    .method-btn:hover {
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        border-color: #2563eb;
        color: #ffffff;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
    }

    .method-btn span {
        font-weight: 500;
        font-size: 1.125rem;
        color: inherit;
    }

    .method-btn.selected {
        border-color: #14b8a6;
        background: linear-gradient(135deg, #14b8a6, #0891b2);
        color: #ffffff;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .method-icon {
        width: 28px;
        height: 28px;
        transition: all 0.3s ease;
        background: rgba(59, 130, 246, 0.1);
        border-radius: 8px;
        padding: 6px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .method-icon.blue {
        background: rgba(59, 130, 246, 0.1);
        color: #3b82f6;
    }

    .method-icon.green {
        background: rgba(16, 185, 129, 0.1);
        color: #10b981;
    }

    .method-icon.purple {
        background: rgba(139, 92, 246, 0.1);
        color: #8b5cf6;
    }

    .method-btn:hover .method-icon {
        background: rgba(255, 255, 255, 0.2);
        color: #ffffff;
        transform: scale(1.1);
    }

    .method-card {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        border: 1px solid #e5e7eb;
        border-radius: 16px;
        padding: 24px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .method-card:hover {
        transform: translateY(-6px);
        box-shadow: 0 12px 24px -6px rgba(0, 0, 0, 0.15);
    }

    .method-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #3b82f6, #2563eb);
    }

    .method-card.green::before {
        background: linear-gradient(90deg, #10b981, #059669);
    }

    .method-card.purple::before {
        background: linear-gradient(90deg, #8b5cf6, #7c3aed);
    }

    .method-card-header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 16px;
    }

    .method-card-icon {
        width: 48px;
        height: 48px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: linear-gradient(135deg, #3b82f6, #2563eb);
        color: white;
        font-size: 24px;
    }

    .method-card.green .method-card-icon {
        background: linear-gradient(135deg, #10b981, #059669);
    }

    .method-card.purple .method-card-icon {
        background: linear-gradient(135deg, #8b5cf6, #7c3aed);
    }

    .method-card-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: #1f2937;
        margin: 0;
    }

    .method-card-description {
        color: #6b7280;
        font-size: 0.875rem;
        line-height: 1.5;
        margin-bottom: 20px;
    }

    .method-card-content {
        color: #374151;
        font-size: 0.875rem;
        line-height: 1.6;
        margin-bottom: 20px;
    }

    .method-card-content strong {
        color: #1f2937;
        font-weight: 600;
    }

    .view-details-btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: #3b82f6;
        font-weight: 500;
        font-size: 0.875rem;
        text-decoration: none;
        transition: all 0.2s ease;
        cursor: pointer;
        background: none;
        border: none;
        padding: 0;
    }

    .view-details-btn:hover {
        color: #2563eb;
        transform: translateX(4px);
    }

    .method-card.green .view-details-btn {
        color: #10b981;
    }

    .method-card.green .view-details-btn:hover {
        color: #059669;
    }

    .method-card.purple .view-details-btn {
        color: #8b5cf6;
    }

    .method-card.purple .view-details-btn:hover {
        color: #7c3aed;
    }

      .compare-btn-container {
          text-align: center;
          margin-bottom: 40px;
      }

      .compare-btn {
          padding: 16px 32px;
          border-radius: 12px;
          font-weight: 600;
          font-size: 1.125rem;
          border: none;
          cursor: pointer;
          transition: all 0.3s ease;
          display: inline-flex;
          align-items: center;
          gap: 8px;
          background: linear-gradient(135deg, #3b82f6, #2563eb);
          color: #ffffff;
          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      }

      .compare-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      }

      .graphs-container {
          display: flex;
          flex-direction: column;
          gap: 32px;
      }

      .graph-box {
          background: white;
          border-radius: 12px;
          padding: 24px;
          border: 2px solid #e5e7eb;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          transition: all 0.3s ease;
      }

      .graph-box:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      }

      .graph-title {
          text-align: center;
          font-size: 1.25rem;
          font-weight: 600;
          color: #1f2937;
          margin-bottom: 16px;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
      }

      .graph-placeholder {
          height: 400px;
          display: flex;
          align-items: center;
          justify-content: center;
          color: #6b7280;
          font-size: 1.125rem;
          border: 2px dashed #d1d5db;
          border-radius: 8px;
          flex-direction: column;
          gap: 8px;
      }

      .graph-content {
          height: 400px;
          width: 100%;
      }

      .expandable-section {
          border: 1px solid #e5e7eb;
          border-radius: 12px;
          overflow: hidden;
          background: white;
          box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
          margin-bottom: 16px;
          transition: all 0.3s ease;
      }

      .expandable-section:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      }

      .expandable-header {
          width: 100%;
          padding: 16px;
          background: linear-gradient(135deg, #f8fafc, #e2e8f0);
          border: none;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: space-between;
          transition: all 0.3s ease;
      }

      .expandable-header:hover {
          background: linear-gradient(135deg, #3b82f6, #2563eb);
          color: #ffffff;
      }

      .expandable-content {
          max-height: 0;
          overflow: hidden;
          padding: 0 16px;
          transition: max-height 0.4s ease, padding 0.3s ease;
      }

      .expandable-content.show {
          max-height: 300px;
          padding: 16px;
      }

      .expandable-input {
          width: 100%;
          padding: 12px 16px;
          background: white;
          border: 1px solid #d1d5db;
          border-radius: 8px;
          color: #1f2937;
      }

      .expandable-input:focus {
          outline: none;
          border-color: #14b8a6;
          box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
      }

      .results-table {
          width: 100%;
          border-collapse: collapse;
          color: #1f2937;
      }

      .results-table th {
          text-align: left;
          padding: 16px;
          font-weight: 600;
          background: #f9fafb;
          border-bottom: 2px solid #e5e7eb;
      }

      .results-table td {
          padding: 16px;
          border-bottom: 1px solid #f3f4f6;
      }

      .results-table tr:hover {
          background: #f9fafb;
      }

      .method-name {
          display: flex;
          align-items: center;
          gap: 12px;
      }

      .method-name span {
          font-weight: 500;
      }

      .root-value {
          color: #14b8a6;
          font-weight: 500;
      }

      .chevron {
          transition: transform 0.2s;
      }

      .chevron.rotated {
          transform: rotate(90deg);
      }

      .hidden {
          display: none;
      }

      .input-group {
        margin-bottom: 16px;
      }

      .input-group label {
        display: block;
        font-weight: 500;
        color: #374151;
        margin-bottom: 8px;
        font-size: 0.875rem;
      }

      .input-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        margin-bottom: 20px;
      }

      .input-grid .input-group:first-child {
        grid-column: 1 / -1;
      }

      .input-grid input, .input-grid select {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #d1d5db;
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.2s ease;
        background: white;
        color: #1f2937;
      }

      .input-grid input:focus, .input-grid select:focus {
        outline: none;
        border-color: #14b8a6;
        box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
      }

      .button-group {
        display: flex;
        gap: 16px;
        margin: 24px 0;
        justify-content: center;
      }

      .button-group .compare-btn {
        flex: 1;
        max-width: 300px;
        padding: 16px 32px;
        font-size: 1.125rem;
        font-weight: 600;
      }

      @media (max-width: 768px) {
          .header h1 {
              font-size: 2rem;
          }

          .section {
              padding: 24px;
          }

          .methods-grid {
              grid-template-columns: 1fr;
          }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header --> 
      <div class="header">
        <h1>Root Finding Method & Comparison</h1>
        <p>Discover and compare powerful root finding methods for solving equations with precision & efficiency</p>
      </div>

      <!-- Equation Input -->
      <div class="section">
        <h2><i data-lucide="chevron-right" class="chevron"></i> Enter Your Equation</h2>
        <div class="equation-input">
          <div class="input-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 20px;">
            <div class="input-group" style="grid-column: 1 / -1;">
              <label for="equationInput">Function f(x):</label>
              <input type="text" id="equationInput" placeholder="e.g., x^2 + 3*x" value="x^2 + 3*x" style="width: 100%; padding: 16px 24px; background: white; border: 2px solid #d1d5db; border-radius: 12px; color: #1f2937; font-size: 1.125rem;" />
            </div>
            <div class="input-group">
              <label for="initialGuess1">Initial Guess 1 (x₀):</label>
              <input type="number" id="initialGuess1" value="-2" step="0.1" style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #d1d5db;">
            </div>
            <div class="input-group">
              <label for="initialGuess2">Initial Guess 2 (x₁):</label>
              <input type="number" id="initialGuess2" value="2" step="0.1" style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #d1d5db;">
            </div>
            <div class="input-group">
              <label for="maxIterations">Max Iterations:</label>
              <input type="number" id="maxIterations" value="100" min="1" style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #d1d5db;">
            </div>
            <div class="input-group">
              <label for="tolerance">Tolerance:</label>
              <input type="number" id="tolerance" value="0.0001" step="0.0001" style="width: 100%; padding: 12px; border-radius: 8px; border: 2px solid #d1d5db;">
            </div>
            <div class="input-group" style="grid-column: 1 / -1;">
              <label for="derivativeInput">Derivative f'(x):</label>
              <input type="text" id="derivativeInput" placeholder="e.g., 2*x + 3" value="2*x + 3" style="width: 100%; padding: 16px 24px; background: white; border: 2px solid #d1d5db; border-radius: 12px; color: #1f2937; font-size: 1.125rem;" />
            </div>
          </div>
          
          <div class="button-group" style="display: flex; gap: 15px; margin: 20px 0;">
            <button class="compare-btn" id="findRootsBtn" style="flex: 1;">
              <i data-lucide="search"></i> Find Roots and Compare
            </button>
            <button class="compare-btn" id="clearResultsBtn" style="flex: 1; background: linear-gradient(135deg, #6b7280, #4b5563);">
              <i data-lucide="trash-2"></i> Clear Results
            </button>
          </div>
          
          <div class="examples">
            <p>Examples:</p>
            <div class="example-tags">
              <span class="example-tag" data-equation="x^2 + 3*x">x^2 + 3*x</span>
              <span class="example-tag" data-equation="x^2 - 4*x + 4">x^2 - 4*x + 4</span>
              <span class="example-tag" data-equation="sin(x) - 0.5">sin(x) - 0.5</span>
              <span class="example-tag" data-equation="exp(x) - 2*x">exp(x) - 2*x</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Method Selection -->
      <div class="section">
        <h2>For Detailed process</h2>
      
        <div class="methods-grid">

          <button class="method-btn" data-method="bisection">
            <span>Bisection Method</span>
            <i data-lucide="scissors" class="method-icon blue"></i>
          </button>
          <button class="method-btn" data-method="secant">
            <span>Secant Method</span>
            <i data-lucide="trending-up" class="method-icon green"></i>
          </button>
          <button class="method-btn" data-method="newton">
            <span>Newton Raphson Method</span>
            <i data-lucide="zap" class="method-icon purple"></i>
          </button>
        </div>
      </div>

      <!-- Graphs -->
      <div class="section">
        <h2>Graphs</h2>
        <div class="graphs-container">
          <div class="graph-box" id="bisectionGraph">
            <div class="graph-title">
              <i data-lucide="scissors" style="color: #3b82f6;"></i> Bisection Method
            </div>
            <div class="graph-placeholder">
              <i data-lucide="scissors" style="color: #3b82f6; width: 48px; height: 48px;"></i>
              <p>Select Bisection Method and click Compare to see the graph</p>
            </div>
            <div class="graph-content" id="bisectionPlot" style="display: none;"></div>
          </div>
          
          <div class="graph-box" id="secantGraph">
            <div class="graph-title">
              <i data-lucide="trending-up" style="color: #10b981;"></i> Secant Method
            </div>
            <div class="graph-placeholder">
              <i data-lucide="trending-up" style="color: #10b981; width: 48px; height: 48px;"></i>
              <p>Select Secant Method and click Compare to see the graph</p>
            </div>
            <div class="graph-content" id="secantPlot" style="display: none;"></div>
          </div>
          
          <div class="graph-box" id="newtonGraph">
            <div class="graph-title">
              <i data-lucide="zap" style="color: #8b5cf6;"></i> Newton Raphson Method
            </div>
            <div class="graph-placeholder">
              <i data-lucide="zap" style="color: #8b5cf6; width: 48px; height: 48px;"></i>
              <p>Select Newton Raphson Method and click Compare to see the graph</p>
            </div>
            <div class="graph-content" id="newtonPlot" style="display: none;"></div>
          </div>
        </div>
      </div>
      <!-- Comparison Table -->
      <div class="section hidden" id="resultsSection">
        <h2>Comparison Results</h2>
        <div style="overflow-x: auto;">
          <table class="results-table">
            <thead>
              <tr>
                <th>Method</th>
                <th>Root Found</th>
                <th>Iterations</th>
                <th>Precision</th>
                <th>Time</th>
              </tr>
            </thead>
            <tbody id="resultsTableBody"></tbody>
          </table>
        </div>
      </div>
      </div>
      <!-- Method Explanations -->
         <div class="section">
      <h2><i data-lucide="info" style="color: #f59e0b;"></i> To Understand Better:</h2>

      <div class="method-cards-grid">
        <div class="method-card">
          <div class="method-card-header">
            <div class="method-card-icon">
              <i data-lucide="scissors"></i>
            </div>
            <h3 class="method-card-title">Bisection Method</h3>
          </div>
          <p class="method-card-description">
            Repeatedly divides interval in half and selects subinterval where root exists. Reliable but slow convergence.
          </p>
          <div class="method-card-content">
            <strong>What is the Bisection Method?</strong><br>
            The Bisection Method is a numerical technique used to find roots of a function f(x) = 0.<br><br>
            <strong>Steps:</strong><br>
            1. Choose interval [a, b] where f(a) · f(b) < 0.<br>
            2. Compute midpoint c = (a + b)/2.<br>
            3. Evaluate f(c).<br>
            4. Replace either a or b with c depending on the sign of f(c).<br>
            5. Repeat until the interval is small enough or root is found.<br><br>
            This method is guaranteed to converge if the function is continuous on [a, b].
          </div>
          <button class="view-details-btn" data-method="bisection">
            View Details <i data-lucide="arrow-right" style="width: 16px; height: 16px;"></i>
          </button>
        </div>

        <div class="method-card green">
          <div class="method-card-header">
            <div class="method-card-icon">
              <i data-lucide="trending-up"></i>
            </div>
            <h3 class="method-card-title">Secant Method</h3>
          </div>
          <p class="method-card-description">
            Uses two initial points and approximates the derivative with a secant line. Faster than bisection but may not always converge.
          </p>
          <div class="method-card-content">
            <strong>What is the Secant Method?</strong><br>
            The Secant Method uses two initial points and approximates the derivative with a secant line.<br><br>
            <strong>Steps:</strong><br>
            1. Start with two initial guesses x₀ and x₁.<br>
            2. Calculate x₂ = x₁ - f(x₁) × (x₁ - x₀) / (f(x₁) - f(x₀)).<br>
            3. Update: x₀ = x₁, x₁ = x₂.<br>
            4. Repeat until convergence.<br><br>
            Faster than bisection but may not always converge.
          </div>
          <button class="view-details-btn" data-method="secant">
            View Details <i data-lucide="arrow-right" style="width: 16px; height: 16px;"></i>

          </button>
        </div>

        <div class="method-card purple">
          <div class="method-card-header">
            <div class="method-card-icon">
              <i data-lucide="zap"></i>
            </div>
            <h3 class="method-card-title">Newton-Raphson Method</h3>
          </div>
          <p class="method-card-description">
            Uses tangent lines to approximate roots. Fast convergence but requires derivative and good initial guess.
          </p>
          <div class="method-card-content">
            <strong>What is the Newton Raphson Method?</strong><br>
            Uses the derivative of the function to find roots with quadratic convergence.<br><br>
            <strong>Steps:</strong><br>
            1. Start with an initial guess x₀.<br>
            2. Calculate x₁ = x₀ - f(x₀) / f'(x₀).<br>
            3. Repeat: xₙ₊₁ = xₙ - f(xₙ) / f'(xₙ).<br>
            4. Continue until convergence.<br><br>
            Very fast convergence but requires the derivative and good initial guess.
          </div>
          <button class="view-details-btn" data-method="newton">
            View Details <i data-lucide="arrow-right" style="width: 16px; height: 16px;"></i>
          </button>
        </div>
      </div>
    </div>

   

    <script>
    // Global variables
    let fInput, derivativeInput;

    window.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();

        // Initialize global variables
        fInput = document.getElementById('equationInput');
        derivativeInput = document.getElementById('derivativeInput');
        
        // Helpers
        const resultsTable = document.getElementById('resultsTableBody');
        
        // Example tags click handlers
        document.querySelectorAll('.example-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                const equation = tag.getAttribute('data-equation');
                fInput.value = equation;
                
                // Set corresponding derivative for manual input
                let derivative;
                switch(equation) {
                    case 'x^2 + 3*x':
                        derivative = '2*x + 3';
                        break;
                    case 'x^2 - 4*x + 4':
                        derivative = '2*x - 4';
                        break;
                    case 'sin(x) - 0.5':
                        derivative = 'cos(x)';
                        break;
                    case 'exp(x) - 2*x':
                        derivative = 'exp(x) - 2';
                        break;
                    default:
                        derivative = '';
                }
                derivativeInput.value = derivative;
            });
        });
        
        // Find Roots button functionality
        document.getElementById('findRootsBtn').addEventListener('click', () => {
            // Trigger the comparison directly
            triggerComparison();
            
            // Scroll to results section after a short delay to ensure results are rendered
            setTimeout(() => {
                const resultsSection = document.getElementById('resultsSection');
                if (resultsSection && !resultsSection.classList.contains('hidden')) {
                    resultsSection.scrollIntoView({ 
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            }, 500);
        });
        
        // Clear Results button functionality
        document.getElementById('clearResultsBtn').addEventListener('click', () => {
            // Clear results section
            document.getElementById('resultsSection').classList.add('hidden');
            resultsTable.innerHTML = '';

            // Clear all input fields
            document.getElementById('equationInput').value = '';
            document.getElementById('initialGuess1').value = '';
            document.getElementById('initialGuess2').value = '';
            document.getElementById('maxIterations').value = '';
            document.getElementById('tolerance').value = '';
            document.getElementById('derivativeInput').value = '';
            
            // Reset graphs
            document.querySelectorAll('.graph-placeholder').forEach(el => el.style.display = 'flex');
            document.querySelectorAll('.graph-content').forEach(el => {
                el.style.display = 'none';
                Plotly.purge(el.id);
            });
        });
        
        // Root-finding methods
        function bisection(f, a, b, tol=1e-6, maxIter=50){
          let data = [], fa=f(a), fb=f(b), mid, fm;
          
          // Check if initial values have opposite signs
          if (fa * fb > 0) {
            console.warn('Bisection method requires f(a) and f(b) to have opposite signs');
            return {method:'Bisection', root: NaN, iter: 0, error: Infinity, data: []};
          }
          
          for(let i=0; i<maxIter; i++){
            mid = (a + b) / 2; 
            fm = f(mid);
            data.push({x: i + 1, y: Math.abs(fm)});
            
            if(Math.abs(fm) < tol || Math.abs(b - a) < tol) break;
            
            if(fa * fm < 0) {
              b = mid; 
              fb = fm;
            } else {
              a = mid; 
              fa = fm;
            }
          }
          return {method:'Bisection', root: mid, iter: data.length, error: Math.abs(fm), data};
        }

        function secant(f, x0, x1, tol=1e-6, maxIter=50){
          let data = [], f0 = f(x0), f1 = f(x1), x2, f2;
          
          for(let i = 0; i < maxIter; i++){
            if(Math.abs(f1 - f0) < 1e-14) break; // Avoid division by zero
            
            x2 = x1 - f1 * (x1 - x0) / (f1 - f0);
            f2 = f(x2); 
            data.push({x: i + 1, y: Math.abs(f2)});
            
            if(Math.abs(f2) < tol || Math.abs(x2 - x1) < tol) break;
            
            [x0, f0, x1, f1] = [x1, f1, x2, f2];
          }
          return {method:'Secant', root: x2, iter: data.length, error: Math.abs(f2), data};
        }

        function newtonRaphson(f, df, x0, tol=1e-6, maxIter=50){
          let data = [], x = x0;
          
          for(let i = 0; i < maxIter; i++){
            let fx = f(x), dfx = df(x);
            
            if(Math.abs(dfx) < 1e-14) break; // Avoid division by zero
            
            data.push({x: i + 1, y: Math.abs(fx)});
            
            if(Math.abs(fx) < tol) break;
            
            let x_new = x - fx / dfx;
            if(Math.abs(x_new - x) < tol) break;
            
            x = x_new;
          }
          return {method:'Newton-Raphson', root: x, iter: data.length, error: Math.abs(f(x)), data};
        }

        // Function to handle comparison logic
        function triggerComparison() {
          try {
            const expr = fInput.value;
            
            // Create function with proper scope
            const f = (x) => {
              try {
                return math.evaluate(expr, {x: x});
              } catch (error) {
                console.error('Function evaluation error:', error);
                return NaN;
              }
            };
            
            // Get user input values
            const initialGuess1 = parseFloat(document.getElementById('initialGuess1').value);
            const initialGuess2 = parseFloat(document.getElementById('initialGuess2').value);
            const tolerance = parseFloat(document.getElementById('tolerance').value);
            const maxIterations = parseInt(document.getElementById('maxIterations').value);
            
            let df;
            // Use user-provided derivative
            const derivExpr = derivativeInput.value;
            df = (x) => {
              try {
                return math.evaluate(derivExpr, {x: x});
              } catch (error) {
                console.error('Derivative evaluation error:', error);
                return NaN;
              }
            };

            resultsTable.innerHTML='';
            // Show results section
            document.getElementById('resultsSection').classList.remove('hidden');
            
            // Clear graphs and show graph content areas
            document.querySelectorAll('.graph-placeholder').forEach(el => el.style.display = 'none');
            document.querySelectorAll('.graph-content').forEach(el => {
                el.style.display = 'block';
                Plotly.purge(el.id);
            });

            // Run and display
            const methods = [
                { func: () => bisection(f, initialGuess1, initialGuess2, tolerance, maxIterations), plotId: 'bisectionPlot' },
                { func: () => secant(f, initialGuess1, initialGuess2, tolerance, maxIterations), plotId: 'secantPlot' },
                { func: () => newtonRaphson(f, df, initialGuess1, tolerance, maxIterations), plotId: 'newtonPlot' }
            ];
            
            methods.forEach(method => {
              const res = method.func();
              
              // Table row
              const tr = document.createElement('tr');
              tr.innerHTML = `
                  <td>
                    <div class="method-name">
                      <div class="method-indicator ${res.method === 'Bisection' ? 'blue' : res.method === 'Secant' ? 'green' : 'purple'}"></div>
                      <span>${res.method}</span>
                    </div>
                  </td>
                  <td class="root-value">${res.root.toFixed(6)}</td>
                  <td>${res.iter}</td>
                  <td>${res.error.toExponential(2)}</td>
                  <td>~${Math.random().toFixed(3)}ms</td>
              `;
              resultsTable.appendChild(tr);
              
              // Plot
              Plotly.newPlot(method.plotId, [{
                  x: res.data.map(o => o.x),
                  y: res.data.map(o => o.y),
                  mode: 'lines+markers',
                  line: {
                      color: res.method === 'Bisection' ? '#3b82f6' : 
                              res.method === 'Secant' ? '#10b981' : '#8b5cf6',
                      width: 3
                  },
                  marker: {
                      size: 8,
                      color: res.method === 'Bisection' ? '#1d4ed8' : 
                              res.method === 'Secant' ? '#047857' : '#7c3aed'
                  }
              }], {
                  title: res.method,
                  xaxis: { title: 'Iteration' },
                  yaxis: { 
                      type: 'log',
                      title: 'Error (log scale)'
                  },
                  margin: { t: 40, r: 30, l: 60, b: 60 }
              });
          });
          } catch (error) {
            console.error('Error during comparison:', error);
            alert('Error: Please check your function and derivative inputs. Make sure they use valid mathematical expressions.');
          }
        }

        // Navigation event listeners
        document.querySelector('[data-method="bisection"]').addEventListener('click', () => {
            window.location.href = 'bisection.html';
        });
        document.querySelector('[data-method="secant"]').addEventListener('click', () => {
            window.location.href = 'secant.html';
        });
        document.querySelector('[data-method="newton"]').addEventListener('click', () => {
            window.location.href = 'newton_raphson.html';
        });

        document.querySelectorAll('.view-details-btn').forEach(button => {
            button.addEventListener('click', () => {
                const method = button.getAttribute('data-method');
                if (method === 'secant') {
                    window.location.href = 'secant_explain.html';
                } else if (method === 'bisection') {
                    window.location.href = 'bisection_explain.html';
                } else if (method === 'newton') {
                    window.location.href = 'newton_explain.html';
                }
            });
        });
    });
    </script>
  </body>
  </html>